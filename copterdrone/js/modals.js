(()=>{"use strict";class e{constructor(e){this.element=e}static initAll(e){e.forEach(e=>{new this(e).init()})}init(){}}class t extends e{constructor(e=document.querySelector(".input")){var t,n;super(e),this.element=e,this.inputElem=null===(t=this.element)||void 0===t?void 0:t.querySelector("input"),this.clearBtn=null===(n=this.element)||void 0===n?void 0:n.querySelector("i")}static initAll(e=document.querySelectorAll(".input")){super.initAll(e)}init(){var e;this.element&&(null===(e=this.clearBtn)||void 0===e||e.addEventListener("click",()=>{this.inputElem&&(this.inputElem.value="",this.inputElem.focus())}))}}class n extends e{constructor(e=document.querySelector(".basket-prew-card")){var t;super(e),this.element=e,this.dataInstock=Number((null===(t=this.element)||void 0===t?void 0:t.dataset.instock)||"")}static initAll(e=document.querySelectorAll(".basket-prew-card")){super.initAll(e)}init(){isNaN(this.dataInstock)&&(this.dataInstock=1),this.bindFavorite(),this.bindCount(),this.bindRemoveBtn()}bindFavorite(){if(!this.element)return;const e=this.element.querySelector(".basket-prew-card__favorite-btn");e&&(null==e||e.addEventListener("click",()=>{null==e||e.classList.toggle("--active")}))}bindCount(){if(!this.element)return;const e=this.element.querySelector(".basket-prew-card__count-value");if(!e)return;const[t,n]=this.element.querySelectorAll(".basket-prew-card__count-minus, .basket-prew-card__count-plus");t&&n&&(n.onclick=()=>{let t=Number(e.textContent)+1;t<=this.dataInstock&&(e.innerHTML=t+"")},t.onclick=()=>{let t=Number(e.textContent)-1;t>=1&&(e.innerHTML=t+"")})}bindRemoveBtn(){this.element}remove(){this.element&&this.element.remove()}}class l{constructor(){this.HTML='\n<div class="fast-pay-modal" role="presentation">\n  <div class="basket-prew-card" data-instock="12">\n    <div class="basket-prew-card__image-wrapper"><img src="assets/img/product-cards/drone.webp" alt="" decoding="async" loading="lazy" width="80" height="80"></div>\n    <div class="basket-prew-card__title">2. Квадрокоптер DJI Mini 4 Pro Fly More Combo Plus (DJI RC 2)</div>\n    <div class="basket-prew-card__count">\n      <div class="basket-prew-card__count-minus" title="Минус"></div>\n      <div class="basket-prew-card__count-value">1</div>\n      <div class="basket-prew-card__count-plus" title="Плюс"></div>\n    </div>\n    <div class="basket-prew-card__count-note">В наличии: 12 шт</div>\n    <div class="basket-prew-card__price-wrapper">\n      <div class="basket-prew-card__price">432 000 ₽</div>\n      <div class="basket-prew-card__price-old">552 000 ₽</div>\n    </div>\n  </div>\n  <div class="fast-pay-modal__form-title">Введите данные для быстрого заказа</div>\n  <form action="javascript:;" class="fast-pay-modal__form">\n    <label class="fast-pay-modal__input">\n      <p class="fast-pay-modal__input-label">Имя</p>\n      <div class="input --medium">\n        <input placeholder="Имя" type="name" name="name" />\n        <i></i>\n      </div>\n    </label>\n    <label class="fast-pay-modal__input">\n      <div class="input --medium">\n        <input placeholder="Телефон" type="tel" name="phone" />\n        <i></i>\n      </div>\n    </label>\n    <label class="fast-pay-modal__input">\n      <div class="input --medium">\n        <input placeholder="Электронная почта" type="email" name="email" />\n        <i></i>\n      </div>\n    </label>\n    <label class="fast-pay-modal__input">\n      <div class="input --medium">\n        <input placeholder="Telegram/Whatsapp/Другое" type="text" name="social" />\n        <i></i>\n      </div>\n    </label>\n    <button type="submit" class="fast-pay-modal__submit-btn btn --accent --medium">\n      <span>Отправить</span>\n      <svg width="20" height="20" viewBox="0 0 20 20" fill="none" xmlns="http://www.w3.org/2000/svg">\n        <path fill-rule="evenodd" clip-rule="evenodd" d="M12.6576 4.13636C13.1331 4.01007 13.6227 4.29274 13.7511 4.7677L15.7239 12.0651C15.8523 12.54 15.5709 13.0275 15.0953 13.1537C14.6198 13.28 14.1302 12.9974 14.0018 12.5224L12.2615 6.08502L5.81649 7.7966C5.34096 7.92288 4.85137 7.64022 4.72297 7.16525C4.59457 6.69028 4.87598 6.20287 5.35151 6.07659L12.6576 4.13636Z" fill="white"/>\n        <path fill-rule="evenodd" clip-rule="evenodd" d="M12.9642 4.86806C13.3912 5.11462 13.5384 5.65914 13.293 6.08429L7.88555 15.4502C7.64009 15.8753 7.09491 16.0201 6.66787 15.7736C6.24082 15.527 6.09362 14.9825 6.33907 14.5573L11.7465 5.19143C11.9919 4.76629 12.5371 4.62151 12.9642 4.86806Z" fill="white"/>\n      </svg>\n    </button>\n    <div class="fast-pay-modal__policy-check">\n\n      <label class="checkbox --medium"><i><input type="checkbox" checked></i>\n        <span>Согласие на обработку персональных данных</span>\n      </label>\n    </div>\n  </form>\n</div>\n  ',this.modal=null,document.querySelectorAll(".fast-pay-modal-open").forEach(e=>{e.addEventListener("click",()=>{window.oval.alert({html:this.HTML,overlay:!0,title:"Купить товар в один клик",closeOnOutsideClick:!0,hideButtons:!0,onOpen:()=>this.onOpen(),modalClass:"",overlayClass:""}).then(e=>this.onFormSubmit(e))})})}onOpen(){if(this.modal=document.querySelector(".fast-pay-modal"),this.modal&&this.modal){const e=this.modal.querySelectorAll(".input"),l=this.modal.querySelector(".basket-prew-card");e.forEach(e=>new t(e).init()),l&&new n(l).init()}}onFormSubmit(e){console.log(e),console.log(e.data)}}class a{static getNameValue(e){const t=e.querySelector(".order-main-form__tab.--active .order-main-form__input-name input");return(null==t?void 0:t.value)||""}static getPhoneValue(e){const t=e.querySelector(".order-main-form__tab.--active .order-main-form__input-phone input");return(null==t?void 0:t.value)||""}static getEmailValue(e){const t=e.querySelector(".order-main-form__tab.--active .order-main-form__input-email input");return(null==t?void 0:t.value)||""}}class i{constructor(){this.HTML='\n    <div class="tbank-disclamer --show" role="presentation">\n      <div class="tbank-disclamer__title-wrapper">\n        <h1 class="tbank-disclamer__title">Процедура оформления кредита</h1>\n        <div class="tbank-disclamer__close-btn">\n          <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">\n            <path d="M17.0898 5.63672C17.4413 5.28525 18.0118 5.28525 18.3633 5.63672C18.7144 5.98805 18.7142 6.55773 18.3633 6.90918L13.2715 12L18.3633 17.0918C18.7146 17.4433 18.7147 18.0138 18.3633 18.3652C18.0119 18.7167 17.4413 18.7165 17.0898 18.3652L11.998 13.2734L6.90723 18.3652C6.55578 18.7162 5.9861 18.7164 5.63477 18.3652C5.28329 18.0138 5.28329 17.4433 5.63477 17.0918L10.7256 12L5.63477 6.90918C5.28357 6.55769 5.28339 5.9881 5.63477 5.63672C5.98615 5.28534 6.55573 5.28552 6.90723 5.63672L11.998 10.7275L17.0898 5.63672Z" fill="currentColor"/>\n          </svg>\n        </div>\n      </div>\n      <img class="tbank-disclamer__logo" src="assets/img/tbank-logo.svg" alt="" width="118" height="36">\n\n      <div class="tbank-disclamer__content">\n        <h2 class="tbank-disclamer__subtitle">1. Заполните анкету и дождитесь одобрения кредита банком</h2>\n        <p class="tbank-disclamer__text">\n          После подтверждения заказа вас автоматически перенаправит на сайт банка для заполнения анкеты. <br>\n          Заполните ее, следуя инструкциям. <br>\n          В установленный банком срок вам придет уведомление об одобрении кредита\n        </p>\n\n        <h2 class="tbank-disclamer__subtitle">2. Подпишите кредитный договор одним из следующих способов:</h2>\n        <p class="tbank-disclamer__text">\n          Через выездного курьера Банка, <br>\n          Безбумажным способом (посредством sms). <br>\n          Варианты будут обозначены после одобрения вашей заявки. <br>\n          Для оформления кредитного договора необходим Ваш паспорт гражданина РФ.\n        </p>\n\n        <h2 class="tbank-disclamer__subtitle">3. Заберите заказ в магазине</h2>\n        <p class="tbank-disclamer__text">\n          Если все товары в наличии, можете забрать заказ в магазине. Вам потребуется Ваш паспорт. <br>\n          Услуга предоставляется АО «ТБанк»\n        </p>\n      </div>\n\n      <form action="javascript:;" class="tbank-disclamer__form">\n        <div class="tbank-disclamer__inputs">\n          <label class="tbank-disclamer__input-name input">\n            <input placeholder="Заполните имя" id="name" type="text" name="name" />\n            <i></i>\n          </label>\n          <label class="tbank-disclamer__input-email input">\n            <input placeholder="Заполните email" id="email" type="email" name="email" />\n            <i></i>\n          </label>\n        </div>\n\n        <button type="submit" class="tbank-disclamer__next-btn btn --medium">\n          <span>Продолжить</span>\n        </button>\n      </form>\n    </div>\n  ',this.modal=null,this.overlay=null,document.querySelectorAll(".open-tbank-disclamer").forEach(e=>{e.addEventListener("click",()=>{window.oval.alert({html:this.HTML,overlay:!0,closeOnOutsideClick:!0,hideButtons:!0,onOpen:()=>this.onOpen(),modalClass:"modal-tbank-disclamer",overlayClass:"modal-overlay-tbank-disclamer"}).then(e=>this.onFormSubmit(e))})})}onOpen(){this.modal=document.querySelector(".modal-tbank-disclamer"),this.overlay=document.querySelector(".modal-overlay-tbank-disclamer"),this.modal&&this.overlay&&(this.modifyCloseBtn(),this.autofillInputs(),this.modal)&&this.modal.querySelectorAll(".input").forEach(e=>new t(e).init())}onFormSubmit(e){console.log(e),console.log(e.data)}modifyCloseBtn(){if(!this.modal)return;const e=this.modal.querySelector(".crossclose"),t=this.modal.querySelector(".tbank-disclamer__close-btn");null==t||t.addEventListener("click",()=>{null==e||e.click()})}autofillInputs(){if(!this.modal)return;const e=this.modal.querySelector(".tbank-disclamer__input-name input"),t=this.modal.querySelector(".tbank-disclamer__input-email input"),n=document.querySelector(".order-main-form");n&&(e&&(e.value=a.getNameValue(n)),t&&(t.value=a.getEmailValue(n)))}}document.addEventListener("DOMContentLoaded",()=>{"function"==typeof window.oval?(new i,new l):console.warn("Модальные окна работать не будут, подключите oval.min.js")})})();